<j-header></j-header>

<div class="container-fluid">
  <div class="row main-content" *ngIf="header.isAuthenticated">
    <div class="col-md-12">
      <div class=row>
        <div class="col-12 mb-2">
          <span class="h5 mr-sm-4">Unfunded Requests:</span>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <filter-ufrs [ufrFilter]="ufrFilter" [cycles]="cycles" [cyclelkp]="cyclelkp" (change)="search()"></filter-ufrs>
          <div class="h6">Select UFR of Interest</div>
          <mat-table [dataSource]="matTableDataSource" matSort matSortActive="number" matSortDirection="asc">
            <ng-container matColumnDef="number">
              <mat-header-cell *matHeaderCellDef mat-sort-header>UFR#</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p">{{p.requestNumber}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="name">
              <mat-header-cell *matHeaderCellDef mat-sort-header>UFR Name</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p">{{p.name}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="progid">
              <mat-header-cell *matHeaderCellDef mat-sort-header>Prog ID</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p">{{getFullProgramName( p )}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="yoe">
              <mat-header-cell *matHeaderCellDef mat-sort-header>YoE?</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p">{{p.yoE}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="status">
              <mat-header-cell *matHeaderCellDef mat-sort-header>Status</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p"> {{p.status}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="disp">
              <mat-header-cell *matHeaderCellDef mat-sort-header>Disp</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p"> {{p.disposition}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="cycle">
              <mat-header-cell *matHeaderCellDef mat-sort-header>Cycle</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p">{{cyclelkp.get(p.pomId)}}</mat-cell>
            </ng-container>
            <ng-container matColumnDef="funding">
              <mat-header-cell *matHeaderCellDef mat-sort-header>Funding Request</mat-header-cell>
              <mat-cell class="ufr-view-link" *matCellDef="let p">&lt;no data?&gt;</mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="['number', 'name', 'progid', 'yoe', 'status', 'disp', 'cycle', 'funding']"></mat-header-row>
            <mat-row *matRowDef="let row; columns: ['number', 'name', 'progid', 'yoe', 'status', 'disp', 'cycle','funding']" (click)="navigate( row )"></mat-row>
          </mat-table>
          <mat-paginator [pageSize]="10"></mat-paginator>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <fieldset>
            <legend>Add New UFR:</legend>
             <new-ufr [editable]="editable"></new-ufr>
          </fieldset>
        </div>
      </div>
    </div>
  </div>
</div>
