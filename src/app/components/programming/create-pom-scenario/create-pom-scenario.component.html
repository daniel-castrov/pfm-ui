<app-header></app-header>
<div class="container-fluid">
  <div class="row main-content" *ngIf="header.isloggedin && community">
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-6 mb-3">
            <div>
              <span class="h5 mr-sm-2 mb-4">Create POM Scenario for FY {{fy}} based on PB</span>
              <select class="h5 form-control-sm" ([ngModel])="modelyear" (change)="setYear($event.target.value)">
                <option *ngFor="let y of years" [value]="y" [selected]="y===modelyear">{{y}}</option>
              </select>
            </div>
            <span class="h6 mr-sm-2">Set Overall TOA for {{community.abbreviation}} Community
                <input class="form-control forminput"  [(ngModel)]="toa">
              </span>
            <div id="toa1" class="table-editable  table-bordered table-striped">
              <table class="table">
                <tr>
                  <th>Community/Organization</th>
                  <th>{{fy}}</th>
                  <th>{{fy+1}}</th>
                  <th>{{fy+2}}</th>
                  <th>{{fy+3}}</th>
                  <th>{{fy+4}}</th>
                </tr>
                <tr>
                  <td>{{community.abbreviation}} Overall</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, community.id, fy)">{{toas.get(fy)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, community.id, fy+1)">{{toas.get(fy+1)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, community.id, fy+2)">{{toas.get(fy+2)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, community.id, fy+3)">{{toas.get(fy+3)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, community.id, fy+4)">{{toas.get(fy+4)}}</td>
                </tr>

                <tr *ngFor="let o of orgs">
                  <td class="pom-label mb-1">{{o.abbreviation}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, o.id, fy)">{{orgtoas.get(o.id).get(fy)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, o.id, fy+1)">{{orgtoas.get(o.id).get(fy+1)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, o.id, fy+2)">{{orgtoas.get(o.id).get(fy+2)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, o.id, fy+3)">{{orgtoas.get(o.id).get(fy+3)}}</td>
                  <td contenteditable="allowedits()" (blur)="editfield($event, o.id, fy+4)">{{orgtoas.get(o.id).get(fy+4)}}</td>
                </tr>
              </table>
            </div>
        </div>
      </div>
      <div class="row">
        <div class="col-8 mb-3">
          <button class="btn btn-primary" [attr.disabled]="!allowedits()" (click)="submit()">Create Scenario</button>
        </div>
      </div>
      <div class="row">
        <div class="col-8">
          <div class="h6">Progress Report:</div>
          <fieldset class="mb-3">
          </fieldset>
        </div>
      </div>
    </div>
  </div>
</div>
