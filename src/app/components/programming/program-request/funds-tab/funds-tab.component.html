<div class="text-danger mb-3" *ngIf="invalid">Funds exceed the total amount of the program request</div>
<div class="row">
  <div class="col-auto">
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{newFLType? newFLType: 'Select an option'}}
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" *ngIf="!pr.creationTimeReferenceId || pr.creationTimeType !== CreationTimeType.SUBPROGRAM_OF_PR_OR_UFR" (click)="selectFundingLineType('Add a new Funding Line')">Add a new Funding Line</a>
        <a class="dropdown-item" *ngIf="existingFundingLines?.length > 0" (click)="selectFundingLineType('Add an existing Funding Line')">Add an existing Funding Line</a>
      </div>
    </div>
  </div>
  <div *ngIf="newFLType === 'Add an existing Funding Line'" class="col-auto">
    <div class="dropdown-label">
      <select [(ngModel)]="selectedFundingLine" class="form-control-sm" name="dummy">
        <option value="null" disabled selected>Select a Funding Line</option>
        <option *ngFor="let fl of existingFundingLines" [ngValue]="fl">{{fl.appropriation + '/' + fl.baOrBlin + '/' + fl.item + '/' + fl.opAgency}}</option>
      </select>
    </div>
  </div>
  <div class="col-auto">
    <button [disabled]="!newFLType || isDisabledAddFundingLines" class="btn btn-primary mb-3" (click)="next()">
      <span class="icon-pad">Next</span>
      <i class="fa fa-arrow-circle-right" aria-hidden="true"></i>
    </button>
  </div>
</div>

<ag-grid-angular #agGrid
                 class="ag-theme-balham pr-funds-tab group-header-white "
                 [gridAutoHeight]="true"
                 [toolPanelSuppressPivotMode]="true"
                 [toolPanelSuppressRowGroups]="true"
                 [toolPanelSuppressValues]="true"
                 [toolPanelSuppressPivots]="true"
                 [toolPanelSuppressColumnFilter]="true"
                 [toolPanelSuppressColumnSelectAll]="true"
                 [suppressMovableColumns]="true"
                 [suppressRowTransform]="true"
                 [overlayNoRowsTemplate]="overlayNoRowsTemplate"
                 [showToolPanel]="false"
                 [enableSorting]="true"
                 [enableFilter]="true"
                 [rowData]="data"
                 [singleClickEdit]="true"
                 [pinnedBottomRowData]="pinnedBottomData"
                 [frameworkComponents]="frameworkComponents"
                 [context]="context"
                 [stopEditingWhenGridLosesFocus]="true"
                 (toolPanelVisibleChanged)="onToolPanelVisibleChanged($event)"
                 (columnVisible)="onColumnVisible($event)"
                 (gridReady)="onGridReady($event)"
                 (cellEditingStarted)="onCellEditingStarted($event)">
</ag-grid-angular>
