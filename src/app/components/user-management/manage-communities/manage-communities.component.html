<app-header></app-header>
<div class="single-row">
  <menu-bar [authUser]="authUser"></menu-bar>
<div class="container-fluid">
    <div class="row main-content">
      <div class="error" *ngFor="let error of resultError">{{error}}</div>
      <div class="col-12">
        <div class="row">
          <div class="col-12">
            <div class="h6">List of Communities</div>
            <ul class="community-list">
              <li *ngFor="let comm of communities">
                <span class="community-name">{{ comm?.name }}</span>
                <span class="btn-card-header"><a href="#" routerLink="/community-details/{{ comm?.id}}"><i class="fa fa-pencil icon-pad" aria-hidden="true"></i> Details</a></span>
              </li>
            </ul>
          </div>
        </div>
        <fieldset>
          <legend>Create a Community</legend>
          <form novalidate #addForm="ngForm">
  
            <span class="form-group">
              <input [formControl]="commname" class="form-control community" name="communityName"
              [(ngModel)]="newCommunity.name" minlength="2" placeholder="*Community Name" required/>
            </span>
  
            <span class="form-group">
              <input [formControl]="commidentifier" class="form-control community" name="communityIdentifier"
              [(ngModel)]="newCommunity.abbreviation" minlength="2" placeholder="*Identifier" required/>
            </span>
              <button class="btn btn-primary btn" (click)="addCommunity()"
                [disabled]="!commname.touched || !commidentifier.touched || 
                           (commname.invalid && commname.errors.alreadyExists) || 
                           (commname.touched && commname.invalid && commname.errors.required) || 
                           (commidentifier.invalid && commidentifier.errors.alreadyExists) || 
                           (commidentifier.touched && commidentifier.invalid && commidentifier.errors.required)">
                <i class="fa fa-plus-square icon-pad" aria-hidden="true"></i>
                Create
              </button>
          </form>
          <div class="text-danger" *ngIf="commname.invalid && commname.errors.alreadyExists">Community name already exists</div>
          <div class="text-danger" *ngIf="commname.touched && commname.invalid && commname.errors.required">Community name is required</div>
          <div class="text-danger" *ngIf="commidentifier.invalid && commidentifier.errors.alreadyExists">Community identifier already exists</div>
          <div class="text-danger" *ngIf="commidentifier.touched && commidentifier.invalid && commidentifier.errors.required">Community identifier is required</div>
        </fieldset>
      </div>
      <div class="col-md-2">
      </div>
    </div>
  </div>  
</div>
