<j-header></j-header>
<div class="container-fluid">
  <div class="row main-content" *ngIf="header.isAuthenticated">
    <div class="error" *ngFor="let error of resultError">{{error}}</div>
    <div class="col-md-12">
      <fieldset>
        <legend>List of Communities</legend>
        <ul class="community-list">
          <li *ngFor="let comm of communities">
            <span class="community-name">{{ comm?.name }}</span>
            <span class="btn-card-header"><a href="#" routerLink="/community-details/{{ comm?.id}}"><i class="fa fa-pencil icon-pad" aria-hidden="true"></i> Details</a></span>
          </li>
        </ul>
      </fieldset>
      <fieldset>
        <legend>Create a Community</legend>
        <form novalidate #addForm="ngForm">

          <span class="form-group">
            <input [formControl]="commname" class="form-control community" name="communityName" 
            [(ngModel)]="newCommunity.name" minlength="2" placeholder="Community Name" required/>
          </span>

          <span class="form-group">
            <input [formControl]="commidentifier" class="form-control community" name="communityIdentifier" 
            [(ngModel)]="newCommunity.abbreviation" minlength="2" placeholder="Identifier" required/>
          </span>
            <button class="btn btn-primary btn" (click)="addCommunity()">
              <i class="fa fa-plus-square icon-pad" aria-hidden="true"></i>
              Create
            </button>
        </form>
        <div class="text-danger" *ngIf="commname.invalid && commname.errors.alreadyExists">Community name already exists</div>
        <div class="text-danger" *ngIf="commname.touched && commname.invalid && commname.errors.required">Community name is required</div>
        <div class="text-danger" *ngIf="commidentifier.invalid && commidentifier.errors.alreadyExists">Community identifier already exists</div>
        <div class="text-danger" *ngIf="commidentifier.touched && commidentifier.invalid && commidentifier.errors.required">Community identifier is required</div>
      </fieldset>
    </div>
    <div class="col-md-2">
    </div>
  </div>
</div>
