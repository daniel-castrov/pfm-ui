<j-header></j-header>
<div class="container-fluid">
  <div class="row main-content" *ngIf="header.isAuthenticated">
    <div class="col-md-10">
      <div class="h5">My Roles</div>
      <fieldset>
        <legend>My Roles</legend>
        <table class="my-roles-list">
          <thead>
            <tr>
              <th>
                Roles
              </th> 
              <th>
                Programs
              </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let roleWres of currentRolesWithResources">
              <td> {{ roleWres.role.name }} </td>
              <td> {{ roleWres.resources.join(', ') }} </td>
            </tr>
          </tbody>
        </table>
      </fieldset>
      <div class="message">
        <j-feedback></j-feedback>
      </div>
      <fieldset>
        <legend>Request a Role Change</legend>
        <div class="row">
          <div class="col-lg-12 col-sm-12 mb-3">
            <label class="mb-1 mr-2">Roles</label>

            <select name="roleSelector" class="form-control-sm dropdown-width" required [(ngModel)]="selectedRole" (change)="getURR()">
              <option value=""></option>
              <option *ngFor="let r of allRoles" [ngValue]="r">
                {{ r.name }}
              </option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <!-- add widget for resources here -->
          </div>
          <div class="col-lg-2 col-sm-12">
            <button class="btn btn-primary mt-3" (click)="createRequest()">Create Request</button>
          </div>
          <div class="col-lg-4 col-sm-12">
            <div class="my-role-label">Pending Requests</div>
            <select size="3" class="form-control-sm pending-role">
              <option class="my-role-message">There are no requests</option>
              <option value="">none</option>
            </select>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Request to Remove a Role</legend>
        <div class="row">
          <div class="col-lg-3 col-sm-12">
            <label class="mb-1 mr-2 mb-3">Roles</label>
            <select name="dropRoleSelector" class="form-control-sm dropdown-width" required [(ngModel)]="selectedDropRole" (change)="nothing()">
              <option value=""></option>
              <option *ngFor="let r of dropableRoles" [ngValue]="r">
                {{ r.name }}
              </option>
            </select>
          </div>
          <div class="col-lg-3 col-sm-4">
            <button class="btn btn-primary mt-1 mb-2" (click)="dropRole()">Create Request</button>
          </div>
          <div class="col-lg-4 col-sm-12">
            <div class="my-role-label">Pending Requests</div>
            <select size="3" class="form-control-sm pending-role">
              <option class="my-role-message">There are no requests</option>
              <option value="">none</option>
            </select>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
</div>
